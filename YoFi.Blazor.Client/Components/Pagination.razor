<div class="mt-2 row">
    <div class="col-sm-7">
        <p class="fs-6">Displaying <span data-test-id="firstitem">@PageInfo.FirstItem</span> through <span data-test-id="lastitem">@(PageInfo.FirstItem + PageInfo.NumItems - 1)</span> of <span data-test-id="totalitems">@PageInfo.TotalItems</span>.</p>
    </div>
    <nav class="col-sm-5" aria-label="Pagination control">
        <ul class="pagination justify-content-end">
            @if (PageInfo.Page > 2 && PageInfo.TotalPages > 3)
            {
                <li class="page-item">
                    <button class="page-link" @onclick="() => UpdatePage(1)" >&laquo;</button>
                </li>
            }
            @if (PageInfo.Page == PageInfo.TotalPages && PageInfo.TotalPages > 2)
            {
                var showpage = PageInfo.Page - 2;
                <li class="page-item">
                    <button class="page-link" @onclick="() => UpdatePage(showpage)" >@showpage</button>
                </li>
            }
            @if (PageInfo.Page > 1)
            {
                var showpage = PageInfo.Page - 1;
                <li class="page-item">
                    <button class="page-link" @onclick="() => UpdatePage(showpage)" >@showpage</button>
                </li>
            }
            <li class="page-item active" aria-current="page">
                <span class="page-link">@PageInfo.Page</span>
            </li>
            @if (PageInfo.Page < PageInfo.TotalPages)
            {
                var showpage = PageInfo.Page + 1;
                <li class="page-item">
                    <button class="page-link" @onclick="() => UpdatePage(showpage)" data-test-id="nextpage">@showpage</button>
                </li>
            }
            @if (PageInfo.Page == 1 && PageInfo.TotalPages > 2)
            {
                var showpage = PageInfo.Page + 2;
                <li class="page-item">
                    <button class="page-link" @onclick="() => UpdatePage(showpage)" >@showpage</button>
                </li>
            }
            @if (PageInfo.Page + 1 < PageInfo.TotalPages && PageInfo.TotalPages > 3)
            {
                <li class="page-item">
                    <button class="page-link" @onclick="() => UpdatePage(PageInfo.TotalPages)" >&raquo;</button>
                </li>
            }
        </ul>
    </nav>
</div>

@code {
    [Parameter]
    public YoFi.WireApi.Client.IWirePageInfo PageInfo { get; set; }

    [Parameter]
    public YoFi.WireApi.Client.IWireQueryParameters Parameters { get; set; }

    [Parameter]
    public EventCallback<int> PageUpdated { get; set; }

    private async void UpdatePage(int page)
    {
        await PageUpdated.InvokeAsync(page);
    }
}
